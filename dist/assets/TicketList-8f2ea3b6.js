import{r as a,a as h,s as g,j as e,L as r,B as o,m as j}from"./index-f1002576.js";import{P as f}from"./plus-d12b9a1f.js";import{f as y}from"./index-c4405eea.js";import{M as c}from"./message-square-e446460b.js";import{X as N}from"./x-circle-cbdf6c29.js";import{C as b}from"./check-circle-811f6759.js";import{C as w}from"./clock-5934541c.js";const M=()=>{const[n,d]=a.useState([]),[m,i]=a.useState(!0),{toast:x}=h();a.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:s,error:t}=await g.from("support_tickets").select(`
          *,
          user:user_id(name, email)
        `).order("created_at",{ascending:!1});if(t)throw t;d(s),i(!1)}catch{x({variant:"destructive",title:"Error",description:"Failed to load tickets"}),i(!1)}},l=s=>{switch(s){case"open":return"bg-yellow-100 text-yellow-600";case"in_progress":return"bg-blue-100 text-blue-600";case"resolved":return"bg-green-100 text-green-600";case"closed":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},p=s=>{switch(s){case"open":return w;case"in_progress":return c;case"resolved":return b;case"closed":return N;default:return c}};return m?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:"Loading tickets..."})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),e.jsx(r,{to:"/support/tickets/create",children:e.jsxs(o,{children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})})]}),e.jsxs("div",{className:"grid gap-6",children:[n.map(s=>{const t=p(s.status);return e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:e.jsx(r,{to:`/support/tickets/${s.id}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.subject}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${l(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsx("p",{className:"text-gray-600 line-clamp-2",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created by: ",s.user.name]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:y(new Date(s.created_at),"MMM d, yyyy 'at' h:mm a")})]})]}),e.jsx(t,{className:`h-6 w-6 ${l(s.status)}`})]})})},s.id)}),n.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[e.jsx(c,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No Tickets Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Create a new ticket to get started"}),e.jsx(r,{to:"/support/tickets/create",children:e.jsx(o,{className:"mt-4",children:"Create Ticket"})})]})]})]})};export{M as default};
