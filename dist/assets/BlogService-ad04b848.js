import{c as A,R as w,j as d,b as y,r as l,P as R,h as T,i as q,k as $,l as F,n as j,o as H,s as h}from"./index-f1002576.js";const U=A("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),se=A("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),W=w.forwardRef(({className:t,type:r,...e},s)=>d.jsx("input",{type:r||"text",className:y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));W.displayName="Input";var K="Label",I=l.forwardRef((t,r)=>d.jsx(R.label,{...t,ref:r,onMouseDown:e=>{var o;e.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));I.displayName=K;var N=I;const G=w.forwardRef(({className:t,...r},e)=>d.jsx(N,{ref:e,className:y("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...r}));G.displayName=N.displayName;const X=w.forwardRef(({className:t,...r},e)=>d.jsx("textarea",{className:y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:e,...r}));X.displayName="Textarea";function Z(t){const r=l.useRef({value:t,previous:t});return l.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}function J(t){const[r,e]=l.useState(void 0);return T(()=>{if(t){e({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,n;if("borderBoxSize"in a){const c=a.borderBoxSize,g=Array.isArray(c)?c[0]:c;i=g.inlineSize,n=g.blockSize}else i=t.offsetWidth,n=t.offsetHeight;e({width:i,height:n})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else e(void 0)},[t]),r}var D="Checkbox",[Q,ae]=q(D),[V,Y]=Q(D),B=l.forwardRef((t,r)=>{const{__scopeCheckbox:e,name:s,checked:o,defaultChecked:a,required:i,disabled:n,value:c="on",onCheckedChange:g,form:p,...v}=t,[f,k]=l.useState(null),C=$(r,u=>k(u)),E=l.useRef(!1),P=f?p||!!f.closest("form"):!0,[m=!1,S]=F({prop:o,defaultProp:a,onChange:g}),M=l.useRef(m);return l.useEffect(()=>{const u=f==null?void 0:f.form;if(u){const x=()=>S(M.current);return u.addEventListener("reset",x),()=>u.removeEventListener("reset",x)}},[f,S]),d.jsxs(V,{scope:e,state:m,disabled:n,children:[d.jsx(R.button,{type:"button",role:"checkbox","aria-checked":b(m)?"mixed":m,"aria-required":i,"data-state":L(m),"data-disabled":n?"":void 0,disabled:n,value:c,...v,ref:C,onKeyDown:j(t.onKeyDown,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:j(t.onClick,u=>{S(x=>b(x)?!0:!x),P&&(E.current=u.isPropagationStopped(),E.current||u.stopPropagation())})}),P&&d.jsx(ee,{control:f,bubbles:!E.current,name:s,value:c,checked:m,required:i,disabled:n,form:p,style:{transform:"translateX(-100%)"},defaultChecked:b(a)?!1:a})]})});B.displayName=D;var _="CheckboxIndicator",z=l.forwardRef((t,r)=>{const{__scopeCheckbox:e,forceMount:s,...o}=t,a=Y(_,e);return d.jsx(H,{present:s||b(a.state)||a.state===!0,children:d.jsx(R.span,{"data-state":L(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:r,style:{pointerEvents:"none",...t.style}})})});z.displayName=_;var ee=t=>{const{control:r,checked:e,bubbles:s=!0,defaultChecked:o,...a}=t,i=l.useRef(null),n=Z(e),c=J(r);l.useEffect(()=>{const p=i.current,v=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(v,"checked").set;if(n!==e&&k){const C=new Event("click",{bubbles:s});p.indeterminate=b(e),k.call(p,b(e)?!1:e),p.dispatchEvent(C)}},[n,e,s]);const g=l.useRef(b(e)?!1:e);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??g.current,...a,tabIndex:-1,ref:i,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(t){return t==="indeterminate"}function L(t){return b(t)?"indeterminate":t?"checked":"unchecked"}var O=B,re=z;const te=w.forwardRef(({className:t,...r},e)=>d.jsx(O,{ref:e,className:y("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:d.jsx(re,{className:y("flex items-center justify-center text-current"),children:d.jsx(U,{className:"h-4 w-4"})})}));te.displayName=O.displayName;class ne{static async getBlogs(){try{const{data:r,error:e}=await h.from("blogs").select("*").order("created_at",{ascending:!1});if(e)throw e;if(console.log("BLOG DATA FROM SUPABASE:",r),r.length>0&&r.map(o=>o.author_id).filter(o=>o).length>0){const{data:o,error:a}=await h.from("users").select("id, name, email, role");if(a)console.error("Error fetching users:",a);else return console.log("USER DATA FROM SUPABASE:",o),r.map(i=>{const n=o.find(c=>c.id===i.author_id)||null;return{...i,author:n}})}return r}catch(r){throw console.error("Error loading blogs:",r),r}}static async getBlog(r){try{const{data:e,error:s}=await h.from("blogs").select("*").eq("id",r).single();if(s)throw s;if(e&&e.author_id){const{data:o,error:a}=await h.from("users").select("id, name, email, role").eq("id",e.author_id).single();a?(console.error("Error fetching user:",a),e.author={name:"Test User"}):e.author=o}return console.log("BLOG DETAIL DATA:",e),e}catch(e){throw console.error(`Error getting blog ${r}:`,e),e}}static async createBlog(r){try{const{summary:e,image:s,...o}=r,{data:a,error:i}=await h.from("blogs").insert([{...o,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select();if(i)throw i;const n={...a[0]};return s&&(n.image=s),n}catch(e){throw console.error("Error creating blog:",e),e}}static async updateBlog(r,e){try{const{summary:s,image:o,...a}=e,{data:i,error:n}=await h.from("blogs").update({...a,updated_at:new Date().toISOString()}).eq("id",r).select();if(n)throw n;const c={...i[0]};return o&&(c.image=o),c}catch(s){throw console.error(`Error updating blog ${r}:`,s),s}}static async deleteBlog(r){try{const{error:e}=await h.from("blogs").delete().eq("id",r);if(e)throw e;return{id:r,deleted:!0}}catch(e){throw console.error(`Error deleting blog ${r}:`,e),e}}}export{ne as B,te as C,W as I,G as L,se as P,X as T,U as a};
