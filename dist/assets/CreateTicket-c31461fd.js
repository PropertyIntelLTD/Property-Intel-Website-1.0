import{r as d,p as j,q as g,a as y,j as e,L as u,B as o,m as f,s as v}from"./index-f1002576.js";import{A as k}from"./arrow-left-4feb1fbe.js";const C=()=>{const[s,m]=d.useState({subject:"",message:"",priority:"medium",category:"general"}),[t,n]=d.useState(!1),{user:p}=j(),x=g(),{toast:c}=y(),h=async l=>{l.preventDefault(),n(!0);try{const{data:i,error:r}=await v.from("support_tickets").insert([{user_id:p.id,subject:s.subject,message:s.message,priority:s.priority,category:s.category,status:"open"}]).select().single();if(r)throw r;c({title:"Success",description:"Support ticket created successfully"}),x(`/support/tickets/${i.id}`)}catch{c({variant:"destructive",title:"Error",description:"Failed to create support ticket"})}finally{n(!1)}},a=l=>{const{name:i,value:r}=l.target;m(b=>({...b,[i]:r}))};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(u,{to:"/support/tickets",children:e.jsxs(o,{variant:"outline",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Back to Tickets"]})})}),e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create Support Ticket"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsx("input",{type:"text",name:"subject",value:s.subject,onChange:a,className:"w-full p-3 border rounded-lg",placeholder:"Brief description of your issue",required:!0,disabled:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{name:"category",value:s.category,onChange:a,className:"w-full p-3 border rounded-lg",disabled:t,children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"technical",children:"Technical"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"property",children:"Property"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),e.jsxs("select",{name:"priority",value:s.priority,onChange:a,className:"w-full p-3 border rounded-lg",disabled:t,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),e.jsx("textarea",{name:"message",value:s.message,onChange:a,className:"w-full p-3 border rounded-lg",rows:6,placeholder:"Detailed description of your issue",required:!0,disabled:t})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(u,{to:"/support/tickets",children:e.jsx(o,{type:"button",variant:"outline",disabled:t,children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:t,children:t?"Creating...":"Create Ticket"})]})]})]})]})};export{C as default};
