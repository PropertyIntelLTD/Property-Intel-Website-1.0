import{r as l,a as j,s as v,j as e,L as r,B as c,m as n}from"./index-f1002576.js";import{M as p}from"./message-square-e446460b.js";import{C as f}from"./clock-5934541c.js";import{C as y}from"./check-circle-811f6759.js";import{P as k}from"./plus-d12b9a1f.js";const S=()=>{const[a,m]=l.useState({total:0,open:0,inProgress:0,resolved:0}),[u,d]=l.useState(!0),{toast:x}=j();l.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:s,error:i}=await v.from("support_tickets").select("status");if(i)throw i;const o=s.reduce((t,b)=>{switch(t.total++,b.status){case"open":t.open++;break;case"in_progress":t.inProgress++;break;case"resolved":t.resolved++;break;default:break}return t},{total:0,open:0,inProgress:0,resolved:0});m(o),d(!1)}catch{x({variant:"destructive",title:"Error",description:"Failed to load support statistics"}),d(!1)}},g=[{title:"Total Tickets",value:a.total,icon:p,color:"bg-blue-100 text-blue-600"},{title:"Open Tickets",value:a.open,icon:f,color:"bg-yellow-100 text-yellow-600"},{title:"In Progress",value:a.inProgress,icon:p,color:"bg-purple-100 text-purple-600"},{title:"Resolved",value:a.resolved,icon:y,color:"bg-green-100 text-green-600"}];return u?e.jsx("div",{children:"Loading support dashboard..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Support Dashboard"}),e.jsx(r,{to:"/support/tickets/create",children:e.jsxs(c,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:g.map((s,i)=>{const o=s.icon;return e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:i*.1},className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-full ${s.color}`,children:e.jsx(o,{className:"h-6 w-6"})})}),e.jsx("h3",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-gray-600",children:s.title})]},s.title)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Tickets"}),e.jsx(r,{to:"/support/tickets",className:"text-primary hover:underline block mt-4",children:"View all tickets â†’"})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{to:"/support/tickets/create",children:e.jsx(c,{className:"w-full",variant:"outline",children:"Create New Ticket"})}),e.jsx(r,{to:"/support/tickets",children:e.jsx(c,{className:"w-full",variant:"outline",children:"View All Tickets"})})]})]})]})]})};export{S as default};
