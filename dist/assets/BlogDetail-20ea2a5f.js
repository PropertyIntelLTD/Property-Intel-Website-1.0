import{c as b,u as w,r as d,a as N,s as p,j as e,L as u,B as o,m as v,T as k,F as y}from"./index-b4b9cf58.js";import{A as L}from"./arrow-left-a24d44f7.js";import{U as B}from"./user-c4b91a31.js";import{C}from"./calendar-efc8bb47.js";import{f as E}from"./index-c4405eea.js";const T=b("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function I(){var h;const{id:m}=w(),[s,f]=d.useState(null),[g,x]=d.useState(!0),{toast:l}=N();d.useEffect(()=>{j()},[m]);const j=async()=>{try{const{data:r,error:t}=await p.from("users").select("*").eq("id",1).single();t&&console.error("Error fetching user:",t);const{data:c,error:a}=await p.from("blogs").select("*").eq("id",m).single();if(a)throw a;const i={...c,author:r||{name:"Test User"}};console.log("BLOG DETAIL DATA:",i),f(i),x(!1)}catch(r){console.error("ERROR LOADING BLOG:",r),l({variant:"destructive",title:"Error",description:"Failed to load blog post"}),x(!1)}},n=r=>{const t=window.location.href,c=(s==null?void 0:s.title)||"Check out this blog post";let a;switch(r){case"twitter":a=`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(c)}`;break;case"facebook":a=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`;break;case"copy":navigator.clipboard.writeText(t).then(()=>{l({title:"Link copied",description:"The post URL has been copied to your clipboard"})}).catch(i=>{console.error("Failed to copy link:",i),l({variant:"destructive",title:"Error",description:"Failed to copy link"})});return;default:return}window.open(a,"_blank","noopener,noreferrer")};return g?e.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:e.jsx("p",{className:"text-xl",children:"Loading blog post..."})}):s?e.jsx("div",{className:"min-h-screen bg-background py-10 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx(u,{to:"/blogs",children:e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(L,{size:16}),"Back to Blogs"]})})}),e.jsxs(v.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-lg shadow-lg overflow-hidden",children:[s.image&&e.jsx("div",{className:"aspect-video relative",children:e.jsx("img",{className:"w-full h-full object-cover",alt:`Blog post about ${s.title}`,src:s.image})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-gray-900",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center text-gray-600 mb-8 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["By ",((h=s.author)==null?void 0:h.name)||"Admin"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:E(new Date(s.created_at),"MMMM d, yyyy")})]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line text-lg leading-relaxed",children:s.content})}),e.jsxs("div",{className:"mt-10 border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Share this article"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",onClick:()=>n("twitter"),children:[e.jsx(k,{size:16}),"Share on Twitter"]}),e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",onClick:()=>n("facebook"),children:[e.jsx(y,{size:16}),"Share on Facebook"]}),e.jsxs(o,{variant:"outline",className:"flex items-center gap-2",onClick:()=>n("copy"),children:[e.jsx(T,{size:16}),"Copy Link"]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl mb-4",children:"Blog post not found"}),e.jsx(u,{to:"/blogs",children:e.jsx(o,{children:"Back to Blogs"})})]})})}export{I as default};
