import{p as w,a as E,r,t as S,j as e,B as l,m as o,v as k,w as R}from"./index-f1002576.js";function L(){const{user:d,logout:p}=w(),{toast:i}=E(),[n,m]=r.useState([]),[j,u]=r.useState(!0),[g,y]=r.useState(0),[b,f]=r.useState(0);r.useEffect(()=>{N()},[d]);const N=async()=>{try{const s=await S(d.id,"landlord");m(s);const t=s.reduce((a,x)=>a+(x.rent||0),0);y(t);const c=s.reduce((a,x)=>{var h;return a+(((h=x.maintenance_requests)==null?void 0:h.length)||0)},0);f(c),u(!1)}catch{i({variant:"destructive",title:"Error",description:"Failed to load properties"}),u(!1)}},v=async s=>{try{const t=await k({...s,landlord_id:d.id});m([...n,t]),i({title:"Success",description:"Property added successfully"})}catch{i({variant:"destructive",title:"Error",description:"Failed to add property"})}},P=async(s,t)=>{try{const c=await R(s,t);m(n.map(a=>a.id===s?c:a)),i({title:"Success",description:"Property updated successfully"})}catch{i({variant:"destructive",title:"Error",description:"Failed to update property"})}};return j?e.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:e.jsx("p",{className:"text-xl",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",d.name]}),e.jsx(l,{onClick:p,variant:"outline",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Total Properties"}),e.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-card p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Total Income"}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",g]})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Pending Requests"}),e.jsx("p",{className:"text-3xl font-bold",children:b})]})]}),e.jsxs("div",{className:"bg-card rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Properties"}),e.jsx(l,{onClick:()=>v({name:"New Property",address:"123 Street",rent:1e3,status:"available"}),children:"Add Property"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.address}),e.jsxs("p",{className:"mt-2",children:["Status: ",s.status]}),e.jsxs("p",{className:"mt-2",children:["Rent: $",s.rent]}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsx(l,{size:"sm",children:"View Details"}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>P(s.id,{...s,name:`${s.name} (Updated)`}),children:"Edit"})]})]},s.id))})]})]})})}export{L as default};
